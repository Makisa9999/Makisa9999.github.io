<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Mario Jovanovic">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <title>Mario Jovanovic</title>
</head>
<body>

    <nav>
        <div class="nav-wrapper teal">
            <div class="container">
                <a href="#" class="brand-logo center">Website</a>
                <ul id="nav-mobile" class="left hide-on-med-and-down">
                    <li><a href="#modal1" class="modal-trigger" id="loginButton">Login</a></li>
                    <li><a href="#" style="display:none;" id="logoutButton">Logout</a></li>
                    <li><a href="#" style="display:none;" id="elementsButton">Elements</a></li>
                    <li><a href="#" style="display:none;" id="elementsGameButton">Elements Game</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="LoginedPage" class="container" style="display: none;">
        <h1 class="teal-text center">Welcome to your account!</h1>
    </div>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <form id="login-form">
                <div class="input-field">
                    <input id="user_name" type="text" autocomplete="" required>
                    <label for="user_name">User Name</label>
                </div>
                <div class="input-field">
                    <input type="password" id="password" autocomplete="" required>
                    <label for="password">Password</label>
                </div>
                <button class="btn teal darken-2 z-depth-0 left" id="sign_in_button">Sign In</button>
            </form>
            <button class="btn teal darken-2 z-depth-0 right" id="createUserButton">Create New User</button>
            <form id="register-form" style="display: none;">
                <div class="input-field">
                    <input type="text" id="username1" autocomplete="" required>
                    <label for="username1">Enter your User Name</label>
                </div>
                <div class="input-field">
                    <input type="text" id="usernameConfirm" autocomplete="" required>
                    <label for="usernameConfirm">Confirm Your User Name</label>
                </div>
                <div class="input-field">
                    <input type="password" id="password-1" autocomplete="" required>
                    <label for="password-1">Enter Your Password</label>
                </div>
                <div class="input-field">
                    <input type="password" id="passwordConfirm" autocomplete="" required>
                    <label for="passwordConfirm">Confirm Your Passwrod</label>
                </div>
                <button class="btn teal darken-2 z-depth-0 left" id="createAccountButton">Create Account</button>
            </form>
            <button class="btn teal darken-2 z-depth-0 right" id="backToLogin">Back To Login</button>
        </div>
        <div class="modal-footer">
            <p class="grey-text lighten-4 center">Mario Jovanovic &copy 2021</p>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    var uNames = ["Makisa9999"]
    var pWords = ["Mario1"]
    function checkLogin (u, p) {
        var username = uNames.includes(u)
        var password = pWords.includes(p)

        if ((username === true) && (password === true)) {
            return true
        }
        return false
    }
    function checkNewAccount (u, uc, p, pc) {
        if ((u === uc) && (p === pc)) {
            uNames.push(u)
            pWords.push(p)
        }
    }
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        options = {opacity: 0.90, inDuration: 1250, outDuration: 625, startingTop: "100%"}
        // opacity dims the background, inDuration time in ms how much it needs to openup, outDuration
        // time in ms how long it takes to close, startingTop which way does it come into the screen    
        var elems = document.querySelectorAll('.modal');
        var instances = M.Modal.init(elems, options);
    });
    var login_form = document.getElementById("login-form")
    document.getElementById('register-form').addEventListener('submit', (e) => {
        e.preventDefault()
        $('.modal').modal(close());
    })
    login_form.addEventListener("submit", (e) => {
        e.preventDefault()
        var usernameSignIn = document.getElementById("user_name").value
        var passwordSignIn = document.getElementById("password").value
        // Make a function to check login
        if (checkLogin(usernameSignIn, passwordSignIn) === true) {
            var LoginedPage = document.getElementById("LoginedPage")
            LoginedPage.style.display = "block"
            document.getElementById("loginButton").style.display = "none"
            var logout_button = document.getElementById("logoutButton")
            logout_button.style.display = "block"
            var elements = document.getElementById("elementsButton")
            elements.style.display = "block"
            var elementsButton = document.getElementById("elementsGameButton")
            elementsButton.style.display = "block"
        } else {
            location.reload()
        }

    })
    var sign_in_button = document.getElementById("sign_in_button")

    sign_in_button.addEventListener("click", function (e) {
        $('.modal').modal(close());
    });

    var logout_button = document.getElementById("logoutButton")

    logout_button.addEventListener("click", (e) => {
        location.reload()
    })

    var createUserButton = document.getElementById('createUserButton')

    createUserButton.addEventListener("click", function (e) {
        login_form.style.display = "none"
        document.getElementById("createUserButton").style.display = "none"
        document.getElementById('register-form').style.display = "block"
        document.getElementById('backToLogin').style.display = "block"
    })
    
    var login_button = document.getElementById("loginButton")
    
    login_button.addEventListener("click", (e) => {
        document.getElementById('backToLogin').style.display = "none"
    })

    var backToLogin = document.getElementById('backToLogin')

    backToLogin.addEventListener("click", (e) => {
        document.getElementById('login-form').style.display = "block"
        document.getElementById('register-form').style.display = "none"
        document.getElementById('backToLogin').style.display = "none"
        document.getElementById('createUserButton').style.display = "block"
    })
    var createAccountButton = document.getElementById('createAccountButton')

    createAccountButton.addEventListener('click', function (e) {
        var valueForUsername1 = document.getElementById('username1').value
        var valueForUsernameConfirm = document.getElementById('usernameConfirm').value
        var valueForPassword_1 = document.getElementById('password-1').value
        var valueForPasswordConfirm = document.getElementById('passwordConfirm').value

        console.log(checkNewAccount(valueForUsername1, valueForUsernameConfirm, valueForPassword_1, valueForPasswordConfirm))
    })
</script>
</body>
</html>
